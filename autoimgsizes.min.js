(function(d,l,q){var m,n;if(l.getElementsByClassName){var b,p=/^img$/i,f=1;d.devicePixelRatio&&(f=d.devicePixelRatio);var c=function(e){e=l.getElementsByClassName(b.autoImgClass);var d=e.length;if(d)for(var c=0;c<d;c++)if(e[c]){var a=e[c];if(p.test(a.nodeName)&&!(null!=a.getAttribute("src")&&0<a.getAttribute("src").length)&&a.getAttribute(b.srcAttr)&&0==a.getAttribute(b.srcAttr).indexOf("http")&&a.getAttribute(b.originSizeAttr)){var g=a.getAttribute(b.originSizeAttr).split("x");n=m=void 0;m=parseFloat(g[0]);n=parseFloat(g[1]);var h=a.parentNode.getBoundingClientRect();if(0!=h.width){var g=h.width*f,h=h.height*f,k="?imageMogr2/";"auto"==a.getAttribute(b.autoAttr)?k+="thumbnail/"+g+"x":(k=m/n>g/h?k+("thumbnail/x"+h):k+("thumbnail/"+g+"x"),k+="/gravity/Center/crop/"+g+"x"+h,a.style.height=h/f+"px");a.setAttribute("src",a.getAttribute(b.srcAttr)+k);a.style.width=g/f+"px"}}}};(function(){var e,f={srcAttr:"data-src",autoAttr:"data-auto",originSizeAttr:"data-origin-size",autoImgClass:"autoImgSizes"};b=d.autoImgSizeConfig||d.autoImgSizeConfig||{};for(e in f)e in b||(b[e]=f[e]);c(!1);d.addEventListener("resize",function(){c(!0)},!0);d.addEventListener("scroll",function(){c(!1)},!0);l.documentElement.addEventListener("DOMNodeInserted",function(){c(!1)},!0);l.documentElement.addEventListener("DOMAttrModified",function(){c(!1)},!0)})()}})(window,document);