(function(e,m,r){var n,p;if(m.getElementsByClassName){var b,q=/^img$/i,l=1;e.devicePixelRatio&&(l=e.devicePixelRatio);var d=function(h){var k=m.getElementsByClassName(b.autoImgClass),e=k.length;if(e)for(var d=0;d<e;d++)if(k[d])a:{var a=k[d],c=h;if(q.test(a.nodeName)){if(c)a.setAttribute("src","");else if(null!=a.getAttribute("src")&&0<a.getAttribute("src").length)break a;if(a.getAttribute(b.srcAttr)&&0==a.getAttribute(b.srcAttr).indexOf("http")&&a.getAttribute(b.originSizeAttr)){c=a.getAttribute(b.originSizeAttr).split("x");p=n=void 0;n=parseFloat(c[0]);p=parseFloat(c[1]);var f=a.parentNode.getBoundingClientRect();if(0!=f.width){var c=f.width*l,f=f.height*l,g="?imageMogr2/";"auto"==a.getAttribute(b.autoAttr)?g+="thumbnail/"+c+"x":(g=n/p>c/f?g+("thumbnail/x"+f):g+("thumbnail/"+c+"x"),g+="/gravity/Center/crop/"+c+"x"+f,a.style.height=f/l+"px");a.setAttribute("src",a.getAttribute(b.srcAttr)+g);a.style.width=c/l+"px"}}}}};(function(){var h,k={srcAttr:"data-src",autoAttr:"data-auto",originSizeAttr:"data-origin-size",autoImgClass:"autoImgSizes"};b=e.autoImgSizeConfig||e.autoImgSizeConfig||{};for(h in k)h in b||(b[h]=k[h]);d(!1);e.addEventListener("resize",function(){d(!0)},!0);m.documentElement.addEventListener("DOMNodeInserted",function(){d(!1)},!0);m.documentElement.addEventListener("DOMAttrModified",function(){d(!1)},!0)})()}})(window,document);